<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-L21J1MSBQH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-L21J1MSBQH');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- 基本 SEO -->
  <title>超越权限提示：让 Claude Code 更安全、更自主 - 人工智能文摘</title>
  <meta name="description" content="【Anthropic 文章中文翻译】Claude Code 的全新沙盒功能——一个 bash 工具和 Claude Code 的网页版——通过启用文件系统和网络隔离这两道边界，减少权限提示并提升用户安全性。 在 Claude Code 中，Claude 会与你并肩编写、测试和调试代码，浏览你的代码...">
  <meta name="keywords" content="Anthropic,AI,人工智能,机器学习,超越权限提示：让 Claude Code 更安全、更自主,中文翻译">
  <meta name="author" content="Anthropic">

  <!-- 规范链接 -->
  <link rel="canonical" href="https://digest.qcngt.com/post/anthropic/2025-10-20-claude-code-sandboxing.html">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="人工智能文摘" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://digest.qcngt.com/post/anthropic/2025-10-20-claude-code-sandboxing.html">
  <meta property="og:title" content="超越权限提示：让 Claude Code 更安全、更自主 - 人工智能文摘">
  <meta property="og:description" content="【Anthropic 文章中文翻译】Claude Code 的全新沙盒功能——一个 bash 工具和 Claude Code 的网页版——通过启用文件系统和网络隔离这两道边界，减少权限提示并提升用户安全性。 在 Claude Code 中，Claude 会与你并肩编写、测试和调试代码，浏览你的代码...">
  <meta property="og:image" content="https://digest.qcngt.com/logo.png">
  <meta property="og:site_name" content="人工智能文摘">
  <meta property="og:locale" content="zh_CN">
  <meta property="article:published_time" content="2025-10-20T00:00:00.000Z">
  <meta property="article:modified_time" content="2025-10-20T00:00:00.000Z">
  <meta property="article:author" content="Anthropic">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://digest.qcngt.com/post/anthropic/2025-10-20-claude-code-sandboxing.html">
  <meta name="twitter:title" content="超越权限提示：让 Claude Code 更安全、更自主 - 人工智能文摘">
  <meta name="twitter:description" content="【Anthropic 文章中文翻译】Claude Code 的全新沙盒功能——一个 bash 工具和 Claude Code 的网页版——通过启用文件系统和网络隔离这两道边界，减少权限提示并提升用户安全性。 在 Claude Code 中，Claude 会与你并肩编写、测试和调试代码，浏览你的代码...">
  <meta name="twitter:image" content="https://digest.qcngt.com/logo.png">

  <!-- 样式和脚本 -->
  <link rel="stylesheet" href="/style.css?v=1761799325651">
  <!-- KaTeX CSS for math rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <a href="/" class="site-title">人工智能文摘</a>
        <nav>
          <button class="menu-toggle" aria-label="切换菜单">☰</button>
          <ul>
            <li><a href="/author/paulgraham.html">Paul Graham</a></li>
            <li><a href="/author/karpathy.html">Andrej Karpathy</a></li>
            <li><a href="/author/thinkingmachines.html">Thinking Machines</a></li>
            <li><a href="/author/anthropic.html">Anthropic</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <main>
    
  <div class="container">
    <article class="author-1">
      <div class="article-content">
        <div class="article-header">
          <h1 class="article-title">超越权限提示：让 Claude Code 更安全、更自主</h1>
          <div class="article-meta">
            
            <span class="article-original-title" title="原文标题">Beyond permission prompts: making Claude Code more secure and autonomous</span>
            <span>|</span>
            
            <span>Anthropic</span>
            <span>|</span>
            <span>2025-10-20</span>
          </div>
        </div>

        <p>Claude Code 的全新沙盒功能——一个 bash 工具和 Claude Code 的网页版——通过启用文件系统和网络隔离这两道边界，减少权限提示并提升用户安全性。</p>
<p>在 <a href="https://www.claude.com/product/claude-code">Claude Code</a> 中，Claude 会与你并肩编写、测试和调试代码，浏览你的代码库、编辑多个文件，并运行命令验证自己的工作。给予 Claude 对代码库和文件的如此高访问权限会带来风险，尤其是在提示注入的情况下。</p>
<p>为了解决这一问题，我们引入了构建在沙盒之上的两项新功能，旨在为开发者提供更安全的工作环境，同时让 Claude 能够更自主地运行并减少权限提示。在我们的内部使用中，我们发现沙盒能够安全地减少 84% 的权限提示。通过设定 Claude 可以自由工作的边界，它们同时提升了安全性和自主性。</p>
<h3><strong>在 Claude Code 中保护用户安全</strong></h3>
<p>Claude Code 采用基于权限的模型：默认情况下，它是只读的，这意味着在进行修改或运行任何命令之前，它会请求许可。当然也有一些例外：我们会自动允许 echo 或 cat 等安全命令，但大多数操作仍需要明确批准。</p>
<p>不断点击“批准”会减缓开发节奏，并可能导致“批准疲劳”——用户可能不会仔细留意自己批准了什么，从而降低开发的安全性。</p>
<p>为了解决这一问题，我们为 Claude Code 推出了沙盒功能。</p>
<h2><strong>沙盒：更安全、更自主的方法</strong></h2>
<p>沙盒会创建预先定义的边界，让 Claude 能够更自由地工作，而无需为每一步都请求许可。启用沙盒后，你会遇到显著更少的权限提示，并获得更高的安全性。</p>
<p>我们的沙盒方案基于操作系统级特性构建，提供两道边界：</p>
<ol>
<li><strong>文件系统隔离</strong>，**** 它确保 Claude 只能访问或修改特定目录。这一点对于防止被提示注入的 Claude 修改敏感系统文件尤为重要。</li>
<li><strong>网络隔离</strong>，**** 它确保 Claude 只能连接到经过批准的服务器。这可以防止被提示注入的 Claude 泄露敏感信息或下载恶意软件。</li>
</ol>
<p>值得注意的是，高效的沙盒需要 <em>同时具备</em> 文件系统和网络隔离。没有网络隔离，被攻陷的代理可能会窃取 SSH 密钥等敏感文件；没有文件系统隔离，被攻陷的代理可能会轻易逃离沙盒并获取网络访问。正是通过同时使用这两种技术，我们才能为 Claude Code 用户提供更安全、更快速的代理体验。</p>
<h3>Claude Code 的两项全新沙盒功能</h3>
<h4><strong>沙盒化 bash 工具：无需权限提示的安全 bash 执行</strong></h4>
<p>我们推出了 <a href="https://docs.claude.com/en/docs/claude-code/sandboxing">全新的沙盒运行时</a>，目前以研究预览版形式提供测试。它允许你精确指定代理可以访问的目录和网络主机，而无需额外管理容器。这个运行时可用于沙盒化任意进程、代理和 MCP 服务器，同时也作为 <a href="https://github.com/anthropic-experimental/sandbox-runtime">一个开源的研究预览</a> 提供。</p>
<p>在 Claude Code 中，我们使用这个运行时对 bash 工具进行沙盒化，使 Claude 可以在你设定的限制内运行命令。在安全的沙盒中，Claude 能够更自主地运行，并在无需权限提示的情况下安全执行命令。如果 Claude 试图访问沙盒 <em>之外</em> 的内容，你会立刻收到通知，并可以选择是否允许。</p>
<p>我们基于 <a href="https://github.com/containers/bubblewrap">Linux bubblewrap</a> 和 MacOS seatbelt 等操作系统层的原语来构建这些限制。它们不仅涵盖 Claude Code 的直接交互，还覆盖命令所衍生的任何脚本、程序或子进程。正如前文所述，这个沙盒同时强制执行：</p>
<ol>
<li><strong>文件系统隔离，</strong> 允许读取和写入当前工作目录，同时阻止修改目录外的任何文件。</li>
<li><strong>网络隔离，</strong> 仅允许通过连接到沙盒外代理服务器的 Unix 域套接字访问互联网。该代理服务器会对进程可连接的域进行限制，并在新域名被请求时处理用户确认。如果你希望进一步提升安全性，我们也支持自定义该代理以对出站流量实施任意规则。</li>
</ol>
<p>这两个组件都可配置：你可以轻松选择允许或禁止特定的文件路径或域名。</p>
<p><img src="/_next/image?url=https%3A%2F%2Fwww-cdn.anthropic.com%2Fimages%2F4zrzovbb%2Fwebsite%2F0d1c612947c798aef48e6ab4beb7e8544da9d41a-4096x2305.png&w=3840&q=75" alt="此图展示了 Claude Code 沙盒的工作方式。">Claude Code 的沙盒架构通过文件系统和网络控制隔离代码执行，自动允许安全操作、阻止恶意操作，并仅在需要时请求许可。</p>
<p>沙盒能够确保即使提示注入成功也被完全隔离，无法影响整体的用户安全。这样一来，即便 Claude Code 被攻陷，它也无法窃取你的 SSH 密钥或向攻击者的服务器发送信息。</p>
<p>要开始使用这一功能，请在 Claude Code 中运行 <code>/sandbox</code>，并查阅我们关于安全模型的 <a href="https://docs.claude.com/en/docs/claude-code/sandboxing">技术细节</a>。</p>
<p>为了让其他团队更容易构建更安全的代理，我们已经将这一功能 <a href="https://github.com/anthropic-experimental/sandbox-runtime">开源</a>。我们相信，其他团队也应考虑将这项技术应用到自己的代理中，从而提升安全防护能力。</p>
<h4><strong>Claude Code 网页版：在云端安全运行 Claude Code</strong></h4>
<p>今天，我们还发布了 <a href="https://docs.claude.com/en/docs/claude-code/claude-code-on-the-web">Claude Code 网页版</a>，帮助用户在云端的隔离沙盒中运行 Claude Code。Claude Code 网页版会在隔离的沙盒中执行每个 Claude Code 会话，在其中安全地完整访问其服务器。我们设计了这套沙盒，确保敏感凭据（例如 git 凭据或签名密钥）绝不会与 Claude Code 同处一个沙盒中。这样，即使沙盒内运行的代码遭到攻陷，用户也能免受进一步伤害。</p>
<p>Claude Code 网页版采用定制代理服务来透明处理所有 git 交互。在沙盒内部，git 客户端使用定制构建的作用域凭据为该服务进行身份验证。代理会验证这一凭据以及 git 交互的内容（例如确保它只推送到配置好的分支），然后在发送请求至 GitHub 前附加正确的认证令牌。</p>
<p><img src="/_next/image?url=https%3A%2F%2Fwww-cdn.anthropic.com%2Fimages%2F4zrzovbb%2Fwebsite%2Fe8f66bcf73d9d23cae67e67776b2d31373c13050-4096x2305.png&w=3840&q=75" alt="此图展示了 Claude Code 网页版如何通过定制代理处理所有 git 交互。">Claude Code 的 Git 集成会将命令路由到安全代理，由其验证认证令牌、分支名称和仓库目标，从而在防止未授权推送的同时支持安全的版本控制工作流。</p>
<h2>入门指南</h2>
<p>全新的沙盒化 bash 工具和 Claude Code 网页版，为使用 Claude 进行工程工作的开发者带来了安全性和生产力的显著提升。</p>
<p>要开始使用这些工具：</p>
<ol>
<li>在 Claude 中运行 <code>/sandbox</code>，并查阅<a href="https://docs.claude.com/en/docs/claude-code/sandboxing">我们的文档</a>，了解如何配置该沙盒。</li>
<li>访问 <a href="http://claude.ai/redirect/website.v1.8f30b491-2bc6-43b9-b000-c6572abf1516/code">claude.com/code</a>，试用 Claude Code 网页版。</li>
</ol>
<p>或者，如果你正在构建自己的代理，请查看我们 <a href="https://github.com/anthropic-experimental/sandbox-runtime">开源的沙盒代码</a>，并考虑将其集成到你的工作中。我们期待看到你的成果。</p>
<p>若想了解更多关于 Claude Code 网页版的信息，请阅读我们的<a href="https://www.anthropic.com/news/claude-code-on-the-web">发布博客文章</a>。</p>
<h2>致谢</h2>
<p>文章由 David Dworken 和 Oliver Weller-Davies 撰写，Catherine Wu、Molly Vorwerck、Alex Isken、Kier Bradwell 和 Kevin Garcia 亦有贡献。</p>
<h2>订阅开发者通讯</h2>
<p>产品更新、操作指南、社区亮点等内容将按月发送至你的收件箱。</p>
<p>如果你想收到我们的月度开发者通讯，请提供你的电子邮箱地址。你可以随时取消订阅。</p>

        
        <div class="original-link">
          <a href="https://www.anthropic.com/engineering/claude-code-sandboxing" target="_blank" rel="noopener noreferrer">
            查看原文 →
          </a>
        </div>
      </div>
    </article>

    <!-- Schema.org 结构化数据 -->
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "超越权限提示：让 Claude Code 更安全、更自主",
  "author": {
    "@type": "Person",
    "name": "Anthropic"
  },
  "datePublished": "2025-10-20T00:00:00.000Z",
  "dateModified": "2025-10-20T00:00:00.000Z",
  "description": "Claude Code 的全新沙盒功能——一个 bash 工具和 Claude Code 的网页版——通过启用文件系统和网络隔离这两道边界，减少权限提示并提升用户安全性。 在 Claude Code 中，Claude 会与你并肩编写、测试和调试代码，浏览你的代码...",
  "publisher": {
    "@type": "Organization",
    "name": "人工智能文摘",
    "logo": {
      "@type": "ImageObject",
      "url": "https://digest.qcngt.com/logo.png"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://digest.qcngt.com/post/anthropic/2025-10-20-claude-code-sandboxing.html"
  }
}
    </script>
  </div>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 人工智能文摘 - 精选 AI 领域优质文章中文翻译</p>
      <p>版权归原文作者所有，仅供学习交流 | 联系方式: <a href="mailto:nblintao+digest@gmail.com">nblintao+digest@gmail.com</a></p>
    </div>
  </footer>

  <script>
    // 汉堡菜单切换
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.querySelector('.menu-toggle');
      const navMenu = document.querySelector('nav ul');

      if (menuToggle && navMenu) {
        menuToggle.addEventListener('click', function(e) {
          e.stopPropagation();
          navMenu.classList.toggle('active');
        });

        // 点击页面其他地方关闭菜单
        document.addEventListener('click', function(e) {
          if (!e.target.closest('nav')) {
            navMenu.classList.remove('active');
          }
        });

        // 点击菜单项后关闭菜单
        navMenu.querySelectorAll('a').forEach(function(link) {
          link.addEventListener('click', function() {
            navMenu.classList.remove('active');
          });
        });
      }
    });
  </script>
</body>
</html>